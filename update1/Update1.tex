\documentclass{neu_handout}
\usepackage{url}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{marvosym}
\usepackage{graphicx}
\graphicspath{ {images/} }
\everymath{\displaystyle}

% Professor/Course information
\title{Update 1}
\author{Emily Dutile, Vyshaal Narayanam, Xiwen Song, Yu Tian}
\date{November 2017}
\course{CS6220}{Data Mining Techniques}

\begin{document}

\section*{1. Problem Statement and Background}
As stated in our proposal, we look to address the following to questions:

(1) What topics are discovered frequently in reviews and do they correlate to a positive or negative review? What should a restaurant focus on to make their rating/reviews better?

(2) What neighborhoods in Pittsburgh have the best cuisine selection? Are there some areas that are more authentic, trendy or upscale than others? Based upon reviews of the top restaurants in Pittsburgh, can we recommend restaurants to a user?

\section*{2. Methods}

\subsection*{2.1 Data Collection and Transformation}
With the Yelp Open Dataset\footnote{\url{https://www.yelp.com/dataset}} consisting of 4.7 million reviews, 156,000 business, and 12 metropolitan areas, we needed to filter out a signification amount of data and perform some further exploration in order to set potential thresholds to either include or exclude some data.\\
To get started, we created local databases and imported the given SQL file using MySQL Server and PyCharm in our development environment. This allowed us to begin writing queries in order to better understand our dataset and possibly explore other questions. From here, we narrowed down and verified what attributes we wanted to use in order to help answer our original questions.  Using Jupyter Notebooks, we extracted the data from SQL queries and stored them in two Pandas DataFrames, to then be able to create some basic visualizations and calculations in order to better filter, preprocess, and understand our data.\\

\begin{center}
Yelp Data Schema\\
\includegraphics[width=75mm,scale=0.5]{schema}\\
\end{center}

\subsection*{2.2 Exploratory Analysis - Reviews}

To begin our exploratory analysis on reviews, we calculated the rating for a restaurant by performing sentiment analysis on reviews and comparing the results with the dataset ratings. Sentiment analysis will determine whether the review is positive or negative. We took a sample dataset of all restaurants in Pittsburgh which have more than 200 reviews to assign our own ratings - there are 109 restaurants in Pittsburgh which satisfy our criteria. We do it by computing the average of the values obtained from sentiment analysis of all the reviews (38,785 reviews) of that restaurant. The sentimental analysis is done using naivebayesclassifier in nltk (textblob is built over nltk). We assign a weight of +5 for a positive review and -5 for a negative review. These newly derived ratings are compared with the ratings in original dataset as shown in the histogram. We can assume these reviews to be more accurate because we are incorporating negative weights to low star reviews.

\begin{center}
\includegraphics[width=70mm,scale=0.5]{sentimentanalysis}
\end{center}

Next, we extracted the top 50 keywords from positive and negative reviews. Again taking a sample dataset of all restaurants in Pittsburgh that have more than 200 reviews. There are a total of 38,785 reviews. Data processing techniques such as tokenizing, filtering, stemming and filtering the key words from those reviews were performed. We then calculated 50 most frequent keywords from the negative and positive reviews separately. Negative and positive reviews were distinguished using the polarity obtained in the previous step.
The results are very promising. Few keywords such as "great","good","nice","service" came with high frequency in positive reviews where as words like "bad","good","terrible","poor","great" appeared negative reviews and common words like "Pittsburgh","food","service","place" are present in both positive and negative reviews. One important point to notice is that "good" and "great" appeared in negative reviews too in a sense that customers are complaining how the food isn't that good/great. High frequencies of words in positive reviews when compared to negative reviews is because of more number of positive reviews in the corpus.

\begin{center}
\includegraphics[width=70mm,scale=0.5]{top50_negativereviews}
\includegraphics[width=70mm,scale=0.5]{top50_positivereviews}
\end{center}

Although some of our exploratory analysis focused on one city, we expanded our reviews analysis to 3 different cities, each in a different country. The thought here was that there may be differences between different cities such as the service, or people may have different habits using different words. It's possible that the final cluster may be verified by different external evaluation criteria, so we thought it'd be useful to further explore this. \\

\subsection*{2.3 Exploratory Analysis - Pittsburgh Neighborhoods' Restaurants}

   Since Boston didn't appear to be in the data set, we first performed some analysis on what other city we'd like to look at in order to perform clustering and recommendation on.
   
\begin{center}
\includegraphics[width=70mm,scale=0.5]{states}
\includegraphics[width=80mm,scale=0.5]{cities}
\end{center}
   
After running some queries and looking at the cities with the most restaurants, we decided to choose Pittsburgh due to the number of restaurants (2089), the significant number of neighborhoods (53), and the variety of cuisines (43 different cuisines). We ended up with these 43 restaurant
cuisines (categories) after filtering out some such as "Burgers", "Pizza" and “Breakfast and Brunch”. We kept all cuisines/categories such as Vietnamese, Asian Fusion, Caribbean, and American (Traditional). Although Phoenix and Las Vegas had more restaurants, Phoenix had no neighborhoods and Las Vegas had fewer neighborhoods. Interestingly enough, Pittsburgh only had 4 restaurants labeled as touristy, so we will look to see if there are particular neighborhoods that are more 'upscale' or 'divey', rather than authentic and touristy.\\

In order to get a better idea of the restaurants within Pittsburgh, we created a simple visualization using the folium library which plots the latitude and longitude of every restaurant on a nice map. Although interesting and useful to implement in order to use it for future visualizations, this doesn't tell us too much other than it appears to be very dense around the middle of the city. Our heat map of restaurant density and the most popular restaurants in Pittsburgh (shown left and right respectively) do show that a lot of the restaurants in the neighborhoods in the center of the city are more popular.

\begin{center}
\includegraphics[width=70mm,scale=0.5]{pa_rest_density}
\includegraphics[width=70mm,scale=0.5]{pa_popular_restaurants}
\end{center}

From here, we decided to further explore the Pittsburgh neighborhoods and first discover the top 10 neighborhoods with the most restaurants. Following this, this lead to creating a map of the top 10 neighborhoods with the highest average review count. In other words, we were curious what neighborhoods are the most popular among Yelp reviewers.

\begin{center}
\includegraphics[width=70mm,scale=0.5]{pitts_hoods_most_restaurants}
\includegraphics[width=70mm,scale=0.5]{top_10_most_popular_neighborhoods}
\end{center}

\section*{3. Next Steps}

\subsection*{3.1 Algorithms}
Imple



\end{document}
